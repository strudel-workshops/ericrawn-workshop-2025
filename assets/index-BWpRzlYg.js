import{d as h,j as e,B as s,D as E,S as m,T as c,v as C,w as R,x as k,P as w,A as F,L as g}from"./index-DlB5-9Hu.js";import{u as q,F as W,a as B}from"./FilterField-pb8pIv-q.js";import{P as O}from"./PageHeader-Lm_aVmvL.js";import{S as H}from"./SciDataGrid-BIRNa3zn.js";import{u as $,f as G,F as V}from"./useListQuery-DYy_kjXj.js";import{S as Q,T as U}from"./DataGrid-D9oKrXuV.js";import{A as Y,C as _}from"./Close-DPac06uH.js";import{F as J,S as K}from"./SwapHoriz-D0fNBncs.js";import"./DatePicker-DGsfGZYu.js";import"./DateCalendar-B_Sn5RrN.js";import"./colorManipulator-DhInvD0b.js";import"./Grid-rKFVYDkB.js";import"./useQuery-D6mwY0rY.js";import"./useGridRootProps-B97WvALQ.js";import"./MenuItem-C7J0uTwS.js";import"./dividerClasses-DzPE0yeG.js";import"./Divider-BE9weUgO.js";const X=({filterConfigs:a,searchTerm:o,setPreviewItem:r})=>{const{activeFilters:t}=q(),[l,i]=h.useState(0),[d,u]=h.useState(25),[j,f]=h.useState(l*d),S="id",p="client",{isPending:P,isFetching:N,isError:A,data:L,error:D}=$({activeFilters:t,dataSource:"https://earthquake.usgs.gov/fdsnws/event/1/query",filterConfigs:a,offset:j,pageSize:d,queryMode:p,staticParams:{format:"geojson",limit:"1000",orderby:"time"}}),M=n=>{r(n.row)},z=n=>{const b=n.pageSize!==d?0:n.page,x=n.pageSize,v=b*x;i(b),u(x),f(v)};if(P){const b=new Array(d).fill(null).map((x,v)=>v);return e.jsx(s,{sx:{padding:2},children:b.map(x=>e.jsx(Q,{height:50},x))})}return A?e.jsx(Y,{severity:"error",children:D.message}):e.jsxs(e.Fragment,{children:[N&&e.jsx(E,{variant:"indeterminate"}),e.jsx(H,{rows:G(L,t,a,o),pagination:!0,paginationMode:p,onPaginationModelChange:z,getRowId:n=>n[S],pageSizeOptions:[25,50,100,{value:-1,label:"All"}],columns:[{field:"place",headerName:"Location",width:300},{field:"mag",headerName:"Magnitude",type:"number",width:120},{field:"time",headerName:"Time",width:200,valueFormatter:n=>n?new Date(n).toLocaleString():""},{field:"depth",headerName:"Depth",units:"km",type:"number",width:120},{field:"alert",headerName:"Alert Level",width:120},{field:"type",headerName:"Type",width:150},{field:"status",headerName:"Status",width:120},{field:"sig",headerName:"Significance",type:"number",width:130}],disableColumnSelector:!0,autoHeight:!0,initialState:{pagination:{paginationModel:{page:l,pageSize:d}}},onRowClick:M})]})},Z=({searchTerm:a,setSearchTerm:o,onToggleFiltersPanel:r})=>{const t=l=>{o(l.target.value)};return e.jsxs(m,{direction:"row",spacing:2,alignItems:"center",sx:{overflow:"hidden",padding:2},children:[e.jsx(c,{variant:"h6",component:"h2",flex:1,children:"Entity List"}),e.jsx(C,{startIcon:e.jsx(J,{}),onClick:r,children:"Filters"}),e.jsx(R,{variant:"outlined",label:"Search",size:"small",value:a,onChange:t})]})},T=({filterConfigs:a,onClose:o,onTogglePosition:r,position:t})=>{const l=e.jsxs(m,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx("span",{children:"Filters"}),e.jsx(U,{title:`Move filters to ${t==="left"?"right":"left"}`,children:e.jsx(k,{size:"small",onClick:r,children:e.jsx(K,{})})})]});return e.jsx(V,{grouped:!1,onClose:o,header:l,sx:{border:"none"},children:a.map((i,d)=>e.jsx(W,{field:i.field,label:i.label,operator:"contains",filterComponent:i.filterComponent,filterProps:i.filterProps},`${i.field}-${d}`))})},I=({previewItem:a,onClose:o})=>{const r=l=>l?new Date(l).toLocaleString():"N/A",t=l=>l==null?"N/A":typeof l=="number"?l.toFixed(2):l.toString();return e.jsx(w,{elevation:0,sx:{height:"100%",padding:2,overflowY:"auto"},children:e.jsxs(m,{spacing:3,children:[e.jsxs(m,{spacing:1,children:[e.jsxs(m,{direction:"row",children:[e.jsx(c,{variant:"h6",component:"h3",flex:1,children:e.jsx(F,{to:"/explore-data/$id",params:{id:a.id},children:a.title||a.place||"Earthquake Event"})}),e.jsx(k,{size:"small",onClick:o,children:e.jsx(_,{})})]}),e.jsx(c,{variant:"body2",children:a.place||"Location not available"})]}),e.jsxs(s,{children:[e.jsx(c,{fontWeight:"medium",mb:1,children:"Basic Information"}),e.jsx(g,{rows:[{label:"Magnitude",value:t(a.mag)},{label:"Magnitude Type",value:a.magType||"N/A"},{label:"Time",value:r(a.time)},{label:"Updated",value:r(a.updated)},{label:"Type",value:a.type||"N/A"},{label:"Status",value:a.status||"N/A"}]})]}),e.jsxs(s,{children:[e.jsx(c,{fontWeight:"medium",mb:1,children:"Location Details"}),e.jsx(g,{rows:[{label:"Longitude",value:t(a.longitude)},{label:"Latitude",value:t(a.latitude)},{label:"Depth",value:`${t(a.depth)} km`},{label:"Place",value:a.place||"N/A"}]})]}),e.jsxs(s,{children:[e.jsx(c,{fontWeight:"medium",mb:1,children:"Status & Alerts"}),e.jsx(g,{rows:[{label:"Review Status",value:a.status||"N/A"},{label:"Tsunami Warning",value:a.tsunami?"Yes":"No"},{label:"Alert Level",value:a.alert||"N/A"},{label:"Significance",value:t(a.sig)}]})]}),e.jsxs(s,{children:[e.jsx(c,{fontWeight:"medium",mb:1,children:"Seismic Metrics"}),e.jsx(g,{rows:[{label:"Felt Reports",value:t(a.felt)},{label:"CDI",value:t(a.cdi)},{label:"MMI",value:t(a.mmi)},{label:"Number of Stations",value:t(a.nst)},{label:"Azimuthal Gap",value:t(a.gap)},{label:"Min Distance",value:t(a.dmin)},{label:"RMS",value:t(a.rms)}]})]}),e.jsxs(s,{children:[e.jsx(c,{fontWeight:"medium",mb:1,children:"Network Information"}),e.jsx(g,{rows:[{label:"Network",value:a.net||"N/A"},{label:"Code",value:a.code||"N/A"},{label:"IDs",value:a.ids||"N/A"},{label:"Sources",value:a.sources||"N/A"},{label:"Types",value:a.types||"N/A"}]})]}),e.jsxs(m,{direction:"row",spacing:1,children:[e.jsx(F,{to:"/explore-data/$id",params:{id:a.id},children:e.jsx(C,{variant:"contained",size:"small",children:"View details"})}),a.url&&e.jsx(C,{variant:"outlined",size:"small",onClick:()=>window.open(a.url,"_blank"),children:"USGS Page"})]})]})})},y=[{field:"mag",label:"Magnitude",operator:"between-inclusive",filterComponent:"RangeSlider",filterProps:{min:0,max:10,step:.1},paramType:"minmax",paramTypeOptions:{minParam:"minmagnitude",maxParam:"maxmagnitude"}},{field:"depth",label:"Depth (km)",operator:"between-inclusive",filterComponent:"RangeSlider",filterProps:{min:0,max:700,step:10},paramType:"minmax",paramTypeOptions:{minParam:"mindepth",maxParam:"maxdepth"}},{field:"type",label:"Event Type",operator:"contains-one-of",filterComponent:"CheckboxList",filterProps:{options:[{label:"Earthquake",value:"earthquake"},{label:"Quarry Blast",value:"quarry blast"},{label:"Explosion",value:"explosion"},{label:"Ice Quake",value:"ice quake"},{label:"Other",value:"other event"}]}},{field:"alert",label:"Alert Level",operator:"contains-one-of",filterComponent:"CheckboxList",filterProps:{options:[{label:"None",value:"none"},{label:"Green",value:"green"},{label:"Yellow",value:"yellow"},{label:"Orange",value:"orange"},{label:"Red",value:"red"}]}}],fe=function(){const[o,r]=h.useState(""),[t,l]=h.useState(),[i,d]=h.useState(!0),[u,j]=h.useState("left"),f=()=>{d(!1)},S=()=>{d(!i)},p=()=>{j(u==="left"?"right":"left")},P=()=>{l(null)};return e.jsx(B,{children:e.jsxs(s,{children:[e.jsx(O,{pageTitle:"Earthquake Data Explorer",description:"Explore earthquake events using USGS earthquake data",sx:{marginBottom:1,padding:2}}),e.jsx(s,{children:e.jsxs(m,{direction:"row",children:[i&&u==="left"&&e.jsx(s,{sx:{width:"350px"},children:e.jsx(T,{filterConfigs:y,onClose:f,onTogglePosition:p,position:u})}),e.jsxs(w,{elevation:0,sx:{flex:1,minHeight:"600px",minWidth:0},children:[e.jsx(Z,{searchTerm:o,setSearchTerm:r,onToggleFiltersPanel:S}),e.jsx(X,{filterConfigs:y,searchTerm:o,setPreviewItem:l})]}),t&&e.jsx(s,{sx:{minWidth:"400px"},children:e.jsx(I,{previewItem:t,onClose:P})}),i&&u==="right"&&e.jsx(s,{sx:{width:"350px"},children:e.jsx(T,{filterConfigs:y,onClose:f,onTogglePosition:p,position:u})})]})})]})})};export{fe as component};
